/* --- ローディングアニメーション --- */
.loading-container {
    text-align: center;
    padding: 24px 0;
    position: absolute;
    top: 50%;
    left: 75%; /* Mergelyの右側に表示するため */
    transform: translate(-50%, -50%);
    z-index: 10001; /* Mergelyモーダルより手前に表示 */
}
.loading-svg {
    fill: none;
    stroke: dodgerblue;
    stroke-width: 10;
    stroke-linecap: round;
    stroke-dasharray: 230 230; /* 円周に近い値 */
    animation: loader 1.4s infinite cubic-bezier(.4,0,.3,1), loading 1.2s infinite linear;
    vertical-align: middle;
    width: 100px;
    height: 100px;
}
@keyframes loader {
    from { stroke-dashoffset: 230; }
    to { stroke-dashoffset: -230; }
}
@keyframes loading {
    from { transform: none; }
    to { transform: rotate(360deg); }
}

/* --- MergelyカスタムCSS --- */
/* jQuery UIダイアログのデフォルト閉じるボタンを非表示 */
.ui-dialog-titlebar-close {
    display: none !important;
}
/* カスタム閉じるボタン */
.custom-close-button {
    cursor: pointer;
    font-size: 20px;
    float: right;
    margin-left: 10px;
    z-index: 1001; /* タイトルより手前 */
}
/* jQuery UIダイアログヘッダーのスタイル調整 */
.ui-widget-header {
    border: none !important;
    background: none !important;
}
.ui-dialog-titlebar {
    padding: 10px !important;
    position: relative;
}
/* Mergely本体のスタイル */
#mergely {
    height: 100%;
    min-height: 300px; /* 最小高さを確保 */
    overflow: auto; /* コンテンツが多い場合にスクロール */
}
/* Mergelyモーダルダイアログのスタイル */
.ui-dialog#mergelyModal {
    padding: 0;
    overflow: hidden; /* ダイアログ自体のスクロールは不要 */
    z-index: 10000 !important; /* 他の要素より手前に表示 */
}
/* ダイアログのオーバーレイ */
.ui-widget-overlay {
    z-index: 9999 !important; /* モーダルよりは背面 */
}
/* Mergelyモーダルのコンテンツ領域 */
#mergelyModal .ui-dialog-content {
    padding-right: 20px !important; /* 右側のパディング調整 */
    height: 100%; /* コンテンツの高さを100%に */
    overflow: hidden; /* コンテンツ領域のスクロールは不要 */
}
/* ダイアログタイトル */
.ui-dialog-title {
    float: left;
    margin: 0.1em 0;
    white-space: nowrap;
    width: 90%; /* 幅を制限 */
    overflow: hidden;
    text-overflow: ellipsis; /* はみ出したテキストを省略記号で表示 */
    font-size: 20px;
}
/* Mergely比較コンテナ */
.compare-container {
    height: calc(100% - 60px); /* ヘッダーを除いた高さいっぱいに */
    overflow: hidden; /* コンテナ自体のスクロールは不要 */
    position: relative;
}
/* Mergely差分表示エリア */
.diffs {
    height: 100%;
    overflow: hidden;
}
/* Mergelyエディタ全体 */
.demo-editor {
    height: 100%;
    overflow: hidden;
    position: relative;
}
/* ラベル（左右ペインのタイトル） */
.labels {
    display: flex;
    justify-content: space-around;
    margin-bottom: 0px;
    font-size: 20px;
}
/* Mergelyヘッダー */
.diffs header {
    display: flex;
    flex-direction: column;
    margin-bottom: 0px;
}
/* Mergely初期表示のスプラッシュを非表示 */
.mergely-splash {
    display: none !important;
}
/* CodeMirror行番号を中央揃え */
.CodeMirror-linenumber {
    text-align: center !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
}
/* CodeMirrorスクロール領域の高さを調整 */
.CodeMirror-scroll {
    height: 100% !important; /* モーダル画面の高さに揃える */
}
/* CodeMirror行の左パディング（行番号と重ならないように） */
.CodeMirror-line {
    padding-left: 30px !important; /* テキストが隠れないようにpaddingを追加 */
}

/* --- 設定モーダルCSS --- */
/* モーダル本体 */
#reviewCriteriaModal {
    position: fixed !important; /* !importantを追加 */
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    background-color: #fff !important;
    border: 1px solid #ccc !important;
    padding: 20px !important;
    z-index: 10010 !important; /* Mergelyモーダルよりさらに手前 */
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1) !important;
    width: 1100px !important; /* 幅を指定 */
    max-width: 90% !important; /* 画面幅に対する最大幅 */
    max-height: 80vh !important; /* 画面高さに対する最大高さ */
    display: flex !important; /* flexboxを確実に適用 */
    flex-direction: column !important; /* 縦方向に配置 */
    box-sizing: border-box !important;
}
/* モーダルタイトル */
#reviewCriteriaModal h2 {
    margin-top: 0 !important;
    margin-bottom: 15px !important; /* ★変更: タブとの間隔 */
    flex: 0 0 auto !important; /* 高さを固定 */
    font-size: 18px !important; /* ★変更 */
    padding-bottom: 10px !important; /* ★追加 */
    border-bottom: 1px solid #eee !important; /* ★追加 */
}
/* モーダル閉じるボタン */
#reviewCriteriaModal .settings-modal-close-button {
    cursor: pointer !important;
    font-size: 24px !important; /* ★変更 */
    float: right !important;
    margin-left: 10px !important;
    line-height: 1 !important; /* ★追加 */
    color: #666 !important; /* ★追加 */
}
#reviewCriteriaModal .settings-modal-close-button:hover {
    color: #333 !important; /* ★追加 */
}
/* モーダル内のラベル（AIモデル選択用、レビュー観点用） */
#reviewCriteriaModal > label,
#reviewCriteriaModal .textarea-container > label { /* ★変更: テキストエリアのラベルも対象に */
    margin-bottom: 5px !important; /* ★変更 */
    flex: 0 0 auto !important;
    display: block !important;
    font-weight: bold !important; /* ★追加 */
    font-size: 14px !important; /* ★追加 */
}
/* AIモデル選択肢コンテナ */
#reviewCriteriaModal .model-options-container {
    display: flex !important;
    flex-direction: column !important;
    margin-bottom: 20px !important;
    flex: 0 0 auto !important;
    border: 1px solid #eee !important;
    max-height: 180px !important; /* ★変更: 少し高さを調整 */
    overflow-y: auto !important;
    padding: 5px !important; /* ★追加 */
    background-color: #f9f9f9 !important; /* ★追加: 背景色 */
}
/* AIモデル選択肢ラベル */
#reviewCriteriaModal .model-options-container label {
    display: flex !important;
    align-items: center !important;
    padding: 8px 5px !important; /* ★変更: パディング調整 */
    cursor: pointer !important;
    border-bottom: 1px solid #eee !important;
    margin-bottom: 0 !important; /* labelデフォルトのマージンを打ち消し */
    background-color: #fff !important; /* ★追加 */
}
#reviewCriteriaModal .model-options-container label:last-child {
    border-bottom: none !important; /* ★追加: 最後の項目は下線を消す */
}
#reviewCriteriaModal .model-options-container label:hover {
    background-color: #f0f0f0 !important; /* ★追加: ホバー効果 */
}
/* AIモデル選択肢ラジオボタン */
#reviewCriteriaModal .model-options-container input[type="radio"] {
    margin-right: 10px !important;
    flex-shrink: 0 !important; /* ★追加 */
}
/* AIモデル選択肢内のコンテンツコンテナ */
#reviewCriteriaModal .model-content-container {
    display: flex !important;
    align-items: center !important;
    width: 100% !important;
    font-size: 13px !important; /* ★変更 */
}
/* AIモデル名 */
#reviewCriteriaModal .model-name {
    flex: 0 0 220px !important; /* ★変更 */
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    font-weight: bold !important; /* ★追加 */
}
/* AIモデル精度情報 (もしあれば) */
#reviewCriteriaModal .model-accuracy {
    margin-left: 10px !important;
    flex: 0 0 80px !important;
    color: #555 !important; /* ★追加 */
}
/* AIモデル制限情報 */
#reviewCriteriaModal .model-limit {
    margin-left: 10px !important;
    flex: 0 0 130px !important; /* ★変更 */
    white-space: nowrap !important;
    color: #555 !important; /* ★追加 */
}
/* AIモデル推奨マーク */
#reviewCriteriaModal .model-recommended {
    color: #d9534f !important;
    font-weight: bold !important;
    margin-left: 10px !important;
    flex: 0 0 auto !important;
    font-size: 12px !important; /* ★追加 */
}
/* AIモデル特徴 */
#reviewCriteriaModal .model-features {
    margin-left: 10px !important;
    flex: 1 1 auto !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    color: #777 !important; /* ★追加 */
}
/* テキストエリアコンテナ */
#reviewCriteriaModal .textarea-container {
    flex: 1 1 auto !important; /* 残りの高さを埋める */
    display: flex !important; /* flexboxを確実に適用 */
    flex-direction: column !important; /* 縦方向に配置 */
    min-height: 150px !important; /* 最小高さを確保 */
    margin-bottom: 15px !important; /* ★追加: ボタンとの間隔 */
}
/* テキストエリア */
#reviewCriteriaModal textarea {
    border: 1px solid #ccc !important;
    resize: vertical !important; /* 縦方向のリサイズのみ許可 */
    width: 100% !important;
    font-size: 14px !important;
    line-height: 1.5 !important;
    font-family: Meiryo, "メイリオ", sans-serif !important;
    flex: 1 1 auto !important; /* 残りの高さを埋める */
    margin-bottom: 0 !important; /* ★変更: コンテナ側でマージン管理 */
    padding: 8px !important; /* ★変更 */
    box-sizing: border-box !important; /* ★追加 */
}
/* ボタンコンテナ */
#reviewCriteriaModal .button-container {
    display: flex !important;
    margin-top: auto !important; /* ★変更なし */
    flex: 0 0 auto !important; /* 高さを固定 */
    justify-content: flex-end !important; /* ボタンを右寄せ */
    padding-top: 15px !important; /* ★追加 */
    border-top: 1px solid #eee !important; /* ★追加 */
}
/* ボタン共通スタイル */
#reviewCriteriaModal .button-container button {
    margin-left: 10px !important;
    padding: 8px 20px !important; /* ★変更 */
    font-size: 14px !important;
    cursor: pointer !important; /* ★追加 */
    border-radius: 4px !important; /* ★追加 */
}
/* プライマリボタン（保存など） */
#reviewCriteriaModal .button-container button.primary {
    background-color: #4285F4 !important;
    color: white !important;
    border: 1px solid #4285F4 !important; /* ★変更 */
}
#reviewCriteriaModal .button-container button.primary:hover {
    background-color: #357ae8 !important; /* ★追加 */
    border-color: #357ae8 !important; /* ★追加 */
}
/* デフォルトボタン（キャンセルなど） */
#reviewCriteriaModal .button-container button.default {
    background-color: #f5f5f5 !important; /* ★変更 */
    color: #333 !important;
    border: 1px solid #ccc !important;
}
#reviewCriteriaModal .button-container button.default:hover {
    background-color: #eee !important; /* ★追加 */
    border-color: #bbb !important; /* ★追加 */
}

/* --- 設定モーダル内のタブ関連 --- */
/* タブボタンコンテナ */
#reviewCriteriaModal .tab-button-container { /* ★追加: タブボタンを囲むdiv用 */
     margin-bottom: 15px !important;
     border-bottom: 1px solid #ccc !important;
     padding-bottom: 0 !important; /* 下線と重ならないように */
     flex-shrink: 0; /* ★追加 */
}
/* タブボタン */
#reviewCriteriaModal .ai-review-tab-button {
    margin-right: 5px !important; /* ★変更 */
    border: 1px solid transparent !important; /* ★変更: 枠線を透明に */
    border-bottom: none !important; /* ★追加 */
    padding: 8px 12px !important; /* ★変更 */
    cursor: pointer !important;
    font-size: 14px !important;
    font-weight: normal !important;
    background-color: #f0f0f0 !important;
    border-radius: 4px 4px 0 0 !important; /* ★追加: 上角を丸める */
    position: relative !important; /* ★追加 */
    bottom: -1px; /* ★追加: 下線をコンテナの線と重ねる */
    color: #555 !important; /* ★追加 */
}
/* アクティブなタブボタン */
#reviewCriteriaModal .ai-review-tab-button.active {
    font-weight: bold !important;
    background-color: #fff !important; /* アクティブ時の背景色 */
    border-color: #ccc !important; /* ★変更 */
    border-bottom-color: #fff !important; /* ★変更: 下線を白にして下の線とつなげる */
    z-index: 1 !important; /* ★追加 */
    color: #333 !important; /* ★追加 */
}
/* 非アクティブなタブボタンのホバー */
#reviewCriteriaModal .ai-review-tab-button:not(.active):hover {
    background-color: #e0e0e0 !important; /* ★追加 */
    color: #333 !important; /* ★追加 */
}
